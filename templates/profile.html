{% extends "base.html" %}

{% block body %}

<div class="container-fluid">
    <div class="row">
        <div class="col-md-4">
            <h2>Bienvenido: {{ session }}</h2>
              <!-- profile del cliente con logeo: {{ resultados.getNombre() }}</p> -->
            <a href="/logout" class="text-warning">Log Out</a> 
            <!-- La relacion que existe entre Cliente y Empleado es ManyToOne(Solo obtengo un objeto) -->
            <p>El empleado asociado con esta empresa es: {{ resultados.getEmp().getApellidos() }}</p>
            <!--               ----------  MENU DESPLEGABLE PARA MOSTRAR DATOS -------------
            <select name="desplegable" id="">
                <option>{{ resultados.getPedido()[0].getPedidoNum() }}</option>
                <option>{{ resultados.getPedido()[0].getPedidoFecha() }}</option>
                <option selected="yes">{{ resultados.getPedido()[0].getPedidoTipo() }}</option>
                <option>{{ resultados.getPedido()[0].getClienteCod() }}</option>
                <option>{{ resultados.getPedido()[0].getFechaEnvio() }}</option>
                <option>{{ resultados.getPedido()[0].getTotal() }}</option>
            </select> 
-->

            <table class="table table-warning table-striped table-hover table-bordered" style="width:100%">
                <caption>Lista de pedidos</caption>
                <thead>
                    <tr>
                        <th scope="col">Numero</th>
                        <th scope="col">Fecha Pedido</th>
                        <th scope="col">Tipo</th>
                        <th scope="col">Cliente Codigo</th>
                        <th scope="col">Fecha Envio</th>
                        <th scope="col">Total</th>
                    </tr>
                </thead>
                <tbody>

                    {% for datos in resultados.getPedido() %}
                    <tr>
                        <!-- La relacion que existe entre Cliente y Pedido es OneToMany(ArrayCollection, obtengo varios objetos) -->
                        <td scope="row"><a href="/edit/{{datos.getPedidoNum()}}">{{ datos.getPedidoNum() }}</a></td>
                        <td scope="row">{{ datos.getPedidoFecha() }}</td>
                        <td scope="row">{{ datos.getPedidoTipo() }}</td>
                        <td scope="row">{{ datos.getCliente().getClienteCod() }}</td>
                        <!-- accedo a traves de la relacion entre pedido y cliente para obtener el codigo de cliente -->
                        <td scope="row">{{ datos.getFechaEnvio() }}</td>
                        <td scope="row">{{ datos.getTotal() }}</td>
                        <td scope="row"> <a href="/delete/{{datos.getPedidoNum()}}">Eliminar</a> </td>
                        <!-- Elimino el pedido pasandole el objeto que es clave primaria en la tabla donde quiero borrarlo -->
                    </tr>
                        {% endfor %}

                    <!-- <th scope="row">{{ resultados.getPedido()[0].getPedidoNum() }}</th>
                        <th scope="row">{{ resultados.getPedido()[0].getPedidoFecha() }}</th>
                        <th scope="row">{{ resultados.getPedido()[0].getPedidoTipo() }}</th>
                        <th scope="row">{{ resultados.getPedido()[0].getClienteCod() }}</th>
                        <th scope="row">{{ resultados.getPedido()[0].getFechaEnvio() }}</th>
                        <th scope="row">{{ resultados.getPedido()[0].getTotal() }}</th> 
                    </tr> -->
                </tbody>
            </table>
        </div>
    </div>
</div>
<br>
<form action="/insert" method="post">
  <div class="form-group row">
    <label name="num" class="col-sm-2 col-form-label-sm">Numero de Pedido</label>
    <div class="col-sm-10">
      <input name="num" type="text" class="form-control" id="" placeholder="Numero de Pedido">
    </div>
  </div>
  <div class="form-group row">
    <label name="cod" class="col-sm-2 col-form-label-sm">Codigo del Cliente</label>
    <div class="col-sm-10">
      <input name="cod" type="text" class="form-control" id="" placeholder="Codigo del Cliente">
    </div>
  </div>
  <div class="form-group row">
    <label name="tipo" class="col-sm-2 col-form-label-sm">Tipo de Pedido</label>
    <div class="col-sm-10">
      <input name="tipo" type="text" class="form-control" id="" placeholder="Tipo de Pedido">
    </div>
  </div>
  <div class="form-group row">
    <label name="total" class="col-sm-2 col-form-label-sm">Total</label>
    <div class="col-sm-10">
      <input name="total" type="text" class="form-control" id="" placeholder="Total">
    </div>
  </div>
  <button type="submit" class="bg-warning">Insertar nuevo pedido</button>
</form>


<br>
<a href="/" class="text-warning">Volver</a>


{% endblock %}

{% block footer %}

    <footer class="footer">
      <div class="container">
        <span class="text-muted">&copy; Pablo_Coviza</span>
      </div>
    </footer>

{% endblock %}